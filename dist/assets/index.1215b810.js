import{u as H,a as j,r,b as $,S as G,g as Y,c as J,i as K,M as D,d as Q,e as A,f as W,h as X,j as c,o as d,k as g,w as t,l as I,F as Z,m as u,n as N,p as k,q as U,_ as E,s as ee,t as z,v as S,x as F,y as R,z as L,T as ue}from"./index.2c261d0b.js";import{c as te}from"./date.91880873.js";const ae=H(),oe=j(),f=r({bankName:"",bankNum:"",id:"",phoneNum:"",userName:"",zfbNum:"",role:""}),q=$(),se=()=>{const e=G;for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(e[o]=q[o]);return e},V=r({...se()});r("/user/getUserContactInfo");const ne=()=>{const e=Y(),o=J(),{role:a}=e;return console.log("\u5DF2\u767B\u5F55\u6743\u9650\uFF1A"+a),K(a)?(o.initRoutes(a),!0):!1},le=async e=>{console.log(e),f.value.bankName=e.bankName,f.value.bankNum=e.bankNum,f.value.id=e.id,f.value.phoneNum=e.phoneNum,f.value.userName=e.userName,f.value.zfbNum=e.zfbNum,f.value.role=e.role,ae.getUserInfo(f.value),await oe.initRoutes(e.role),V.value.mode=te(),await D.success("\u6B22\u8FCE\u60A8\uFF0C"+e.userName),V.value.brandTheme="default",q.updateConfig(V.value),await Q.push("/dashboard/mainInfo")},re=A({__name:"Login",setup(e){const o={phoneNum:[{required:!0,message:"\u8D26\u53F7\u5FC5\u586B",type:"error"}],password:[{required:!0,message:"\u5BC6\u7801\u5FC5\u586B",type:"error"}]},a=r("password"),m=r({phoneNum:"19825089387",password:"zhbd123"}),n=r(!1),C=r(!1);W();const l=X({bankName:"\u4E2D\u56FD\u5EFA\u8BBE\u94F6\u884C",bankNum:"card1111111111",id:"1",phoneNum:"19825089387",userName:"shilei",zfbNum:"19825089387",role:"superadmin"}),h=async({validateResult:y})=>{y===!0&&(C.value=!0,ne()?C.value=!1:(localStorage.removeItem("token"),await le(l)))};return(y,_)=>{const w=c("t-icon"),x=c("t-input"),v=c("t-form-item"),s=c("t-button"),B=c("t-form");return d(),g(B,{ref:"form",class:U(["item-container",`login-${a.value}`]),data:m.value,rules:o,"label-width":"0",onSubmit:h},{default:t(()=>[a.value=="password"?(d(),I(Z,{key:0},[u(v,{name:"phoneNum"},{default:t(()=>[u(x,{modelValue:m.value.phoneNum,"onUpdate:modelValue":_[0]||(_[0]=p=>m.value.phoneNum=p),size:"large",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7\uFF1Acxy"},{"prefix-icon":t(()=>[u(w,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),u(v,{name:"password"},{default:t(()=>[u(x,{modelValue:m.value.password,"onUpdate:modelValue":_[2]||(_[2]=p=>m.value.password=p),size:"large",type:n.value?"text":"password",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801\uFF1Aabc123123"},{"prefix-icon":t(()=>[u(w,{name:"lock-on"})]),"suffix-icon":t(()=>[u(w,{name:n.value?"browse":"browse-off",onClick:_[1]||(_[1]=p=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1})],64)):N("",!0),a.value!=="qrcode"?(d(),g(v,{key:1,class:"btn-container"},{default:t(()=>[u(s,{block:"",size:"large",type:"submit",loading:C.value},{default:t(()=>[k("\u767B \u5F55")]),_:1},8,["loading"])]),_:1})):N("",!0)]),_:1},8,["class","data"])}}});const ie=E(re,[["__scopeId","data-v-c525aae1"]]),ce=(e=60)=>{let o;ee(()=>{clearInterval(o)});const a=r(0);return[a,()=>{a.value=e,o=setInterval(()=>{a.value>0?a.value-=1:(clearInterval(o),a.value=0)},1e3)}]},P=e=>(R("data-v-9f4aa64d"),e=e(),L(),e),de=P(()=>F("span",null,"TDesign\u670D\u52A1\u534F\u8BAE",-1)),me=P(()=>F("span",null,"TDesign \u9690\u79C1\u58F0\u660E",-1)),pe={class:"switch-container"},_e=A({__name:"Register",emits:["registerSuccess"],setup(e,{emit:o}){const a={phone:"",email:"",password:"",verifyCode:"",checked:!1},m={phone:[{required:!0,message:"\u624B\u673A\u53F7\u5FC5\u586B",type:"error"}],email:[{required:!0,message:"\u90AE\u7BB1\u5FC5\u586B",type:"error"},{email:!0,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1",type:"warning"}],password:[{required:!0,message:"\u5BC6\u7801\u5FC5\u586B",type:"error"}],verifyCode:[{required:!0,message:"\u9A8C\u8BC1\u7801\u5FC5\u586B",type:"error"}]},n=r("phone"),C=r(),l=r({...a}),h=r(!1),[y,_]=ce(),w=({validateResult:v})=>{if(v===!0){if(!l.value.checked){D.error("\u8BF7\u540C\u610FTDesign\u670D\u52A1\u534F\u8BAE\u548CTDesign \u9690\u79C1\u58F0\u660E");return}D.success("\u6CE8\u518C\u6210\u529F"),o("registerSuccess")}},x=v=>{C.value.reset(),n.value=v};return(v,s)=>{const B=c("t-icon"),p=c("t-input"),b=c("t-form-item"),T=c("t-button"),O=c("t-checkbox"),M=c("t-form");return d(),g(M,{ref_key:"form",ref:C,class:U(["item-container",`register-${n.value}`]),data:l.value,rules:m,"label-width":"0",onSubmit:w},{default:t(()=>[n.value=="phone"?(d(),g(b,{key:0,name:"phone"},{default:t(()=>[u(p,{modelValue:l.value.phone,"onUpdate:modelValue":s[0]||(s[0]=i=>l.value.phone=i),maxlength:11,size:"large",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u53F7"},{"prefix-icon":t(()=>[u(B,{name:"user"})]),_:1},8,["modelValue"])]),_:1})):N("",!0),n.value=="email"?(d(),g(b,{key:1,name:"email"},{default:t(()=>[u(p,{modelValue:l.value.email,"onUpdate:modelValue":s[1]||(s[1]=i=>l.value.email=i),type:"text",size:"large",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1"},{"prefix-icon":t(()=>[u(B,{name:"mail"})]),_:1},8,["modelValue"])]),_:1})):N("",!0),u(b,{name:"password"},{default:t(()=>[u(p,{modelValue:l.value.password,"onUpdate:modelValue":s[3]||(s[3]=i=>l.value.password=i),size:"large",type:h.value?"text":"password",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},{"prefix-icon":t(()=>[u(B,{name:"lock-on"})]),"suffix-icon":t(()=>[u(B,{name:h.value?"browse":"browse-off",onClick:s[2]||(s[2]=i=>h.value=!h.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),n.value=="phone"?(d(),g(b,{key:2,class:"verification-code",name:"verifyCode"},{default:t(()=>[u(p,{modelValue:l.value.verifyCode,"onUpdate:modelValue":s[4]||(s[4]=i=>l.value.verifyCode=i),size:"large",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),u(T,{variant:"outline",disabled:S(y)>0,onClick:S(_)},{default:t(()=>[k(z(S(y)==0?"\u53D1\u9001\u9A8C\u8BC1\u7801":`${S(y)}\u79D2\u540E\u53EF\u91CD\u53D1`),1)]),_:1},8,["disabled","onClick"])]),_:1})):N("",!0),u(b,{class:"check-container",name:"checked"},{default:t(()=>[u(O,{modelValue:l.value.checked,"onUpdate:modelValue":s[5]||(s[5]=i=>l.value.checked=i)},{default:t(()=>[k("\u6211\u5DF2\u9605\u8BFB\u5E76\u540C\u610F ")]),_:1},8,["modelValue"]),k(),de,k(" \u548C "),me]),_:1}),u(b,null,{default:t(()=>[u(T,{block:"",size:"large",type:"submit"},{default:t(()=>[k(" \u6CE8\u518C ")]),_:1})]),_:1}),F("div",pe,[F("span",{class:"tip",onClick:s[6]||(s[6]=i=>x(n.value=="phone"?"email":"phone"))},z(n.value=="phone"?"\u4F7F\u7528\u90AE\u7BB1\u6CE8\u518C":"\u4F7F\u7528\u624B\u673A\u53F7\u6CE8\u518C"),1)])]),_:1},8,["class","data"])}}});const ve=E(_e,[["__scopeId","data-v-9f4aa64d"]]),fe={class:"login-header"},ge=A({__name:"Header",setup(e){return $(),(o,a)=>(d(),I("header",fe))}});const Fe=E(ge,[["__scopeId","data-v-0a30d5d3"]]),Ce=e=>(R("data-v-98ad7e03"),e=e(),L(),e),he={class:"login-wrapper"},ye={class:"login-container"},Be=Ce(()=>F("div",{class:"title-container"},[F("h1",{class:"title margin-no"},"\u767B\u5F55\u5230"),F("h1",{class:"title"},"\u667A\u6167\u62A5\u5355\u7CFB\u7EDF")],-1)),be={name:"LoginIndex"},ke=A({...be,setup(e){const o=r("login"),a=m=>{o.value=m};return(m,n)=>(d(),I("div",he,[u(Fe),F("div",ye,[Be,o.value==="login"?(d(),g(ie,{key:0})):(d(),g(ve,{key:1,onRegisterSuccess:n[0]||(n[0]=C=>a("login"))})),u(ue)])]))}});const xe=E(ke,[["__scopeId","data-v-98ad7e03"]]);export{xe as default};
