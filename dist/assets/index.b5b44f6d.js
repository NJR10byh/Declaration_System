import{e as L,b as k,f as K,B as z,h as f,r as N,L as U,O as B,j as u,o as R,l as P,m as e,w as a,p as g,v as E,t as T,x as S,F as V,U as j,W as O,y as q,z as M,_ as $}from"./index.2c261d0b.js";import{t as W}from"./date.91880873.js";const w={listSettle:"/payback/listSettle",getSettleDetail:"/payback/getSettleDetail"},G=[{title:"\u5E8F\u53F7",align:"center",colKey:"index",width:50},{title:"\u7528\u6237\u540D\u79F0",align:"center",colKey:"userName",width:100,ellipsis:!0},{title:"\u7ED3\u7B97\u91D1\u989D",align:"center",colKey:"payAmount",width:80,ellipsis:!0},{title:"\u7ED3\u7B97\u4EBA",align:"center",colKey:"payUser",width:100,ellipsis:!0},{title:"\u7ED3\u7B97\u65F6\u95F4",align:"center",colKey:"payTime",width:120,ellipsis:!0},{title:"\u64CD\u4F5C",align:"left",colKey:"settings",fixed:"right",width:80}],H=[{title:"\u5E8F\u53F7",align:"center",colKey:"index",width:50},{title:"\u8BA2\u5355\u53F7",align:"center",colKey:"orderId",width:80,ellipsis:!0},{title:"\u5546\u54C1",align:"left",colKey:"commodity",width:150,ellipsis:!0},{title:"\u5B9E\u4ED8\u91D1\u989D",align:"center",colKey:"payAmount",width:80,ellipsis:!0},{title:"\u5E94\u8FD4\u6B3E\u91D1\u989D",align:"center",colKey:"shouldPayback",width:80,ellipsis:!0},{title:"\u5907\u6CE8",align:"left",colKey:"remark",width:100,ellipsis:!0},{title:"\u5BA1\u6838\u5907\u6CE8",align:"left",colKey:"approvalRemark",width:100,ellipsis:!0}],J=c=>(q("data-v-23757590"),c=c(),M(),c),Q=J(()=>S("div",{class:"cardTitle"},"\u641C\u7D22\u6761\u4EF6",-1)),X={class:"settingBtns"},Y=L({__name:"index",setup(c){const v=k();K();const C=z(()=>v.isUseTabsRouter?48:0),m=()=>document.querySelector(`.${j}-layout`),t=f({tableLoading:!1,tableData:[],searchText:"",pagination:{total:0,current:1,pageSize:20}}),i=f({tableLoading:!1,tableData:[],footData:[{index:"\u5408\u8BA1",shouldPayback:"0"}]}),_=N(!1),r=f({pageNo:1,pageItems:20,commodity:null,status:null,startTime:null,endTime:null,reporter:null,orderId:null});U(()=>{t.pagination.current=r.pageNo,t.pagination.pageSize=r.pageItems,b()});const F=o=>{console.log("\u5206\u9875\u53D8\u5316",o),r.pageNo=o.current,r.pageItems=o.pageSize,t.pagination.current=r.pageNo,t.pagination.pageSize=r.pageItems,b()},b=()=>{t.tableData=[],t.tableLoading=!0,B.post({url:w.listSettle,data:r}).then(o=>{t.pagination.total=o.totalRows,t.tableData=o.list,t.tableData.map((l,s)=>{l.index=(t.pagination.current-1)*t.pagination.pageSize+s+1,l.payAmount+=" \u5143",l.payTime=W(l.payTime)})}).catch(o=>{}).finally(()=>{t.tableLoading=!1})},A=o=>{i.tableData=[],i.tableLoading=!0,console.log("\u8BE6\u60C5",o);let l={statId:o.statId};B.post({url:O(w.getSettleDetail,l)}).then(s=>{i.footData[0].shouldPayback=s.total+" \u5143",i.tableData=s.list,i.tableData.map((d,p)=>{d.index=p+1,d.payAmount+=" \u5143",d.shouldPayback+=" \u5143"}),_.value=!0}).catch(s=>{}).finally(()=>{i.tableLoading=!1})};return(o,l)=>{const s=u("t-row"),d=u("t-input"),p=u("t-icon"),y=u("t-button"),h=u("t-card"),D=u("t-tag"),x=u("t-table"),I=u("t-dialog");return R(),P(V,null,[e(h,{class:"rebated-card"},{default:a(()=>[e(s,{justify:"start",class:"cardTop"},{default:a(()=>[Q]),_:1}),e(s,{justify:"start",class:"cardTop"},{default:a(()=>[e(d,{class:"inputStyle",modelValue:t.searchText,"onUpdate:modelValue":l[0]||(l[0]=n=>t.searchText=n),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:""},null,8,["modelValue"]),e(y,{class:"inputStyle",style:{width:"100px"}},{icon:a(()=>[e(p,{name:"search"})]),default:a(()=>[g(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1}),e(h,{class:"rebated-card"},{default:a(()=>[e(x,{class:"tableStyle",data:t.tableData,columns:E(G),"row-key":"id",hover:"",stripe:"",pagination:t.pagination,loading:t.tableLoading,"header-affixed-top":{offsetTop:C.value,container:m},"horizontal-scroll-affixed-bottom":{offsetBottom:64,container:m},"pagination-affixed-bottom":{offsetBottom:0,container:m},onPageChange:F,size:"small",style:{"margin-top":"10px"}},{payAmount:a(n=>[e(D,{theme:"primary",variant:"light-outline"},{default:a(()=>[g(T(n.row.payAmount),1)]),_:2},1024)]),settings:a(n=>[S("div",X,[e(y,{theme:"primary",onClick:Z=>A(n.row)},{icon:a(()=>[e(p,{name:"view-module"})]),default:a(()=>[g(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"])])]),_:1},8,["data","columns","pagination","loading","header-affixed-top","horizontal-scroll-affixed-bottom","pagination-affixed-bottom"])]),_:1}),e(I,{visible:_.value,"onUpdate:visible":l[1]||(l[1]=n=>_.value=n),width:"1000px",header:"\u8FD4\u6B3E\u8BE6\u60C5",attach:"body",footer:!1},{body:a(()=>[e(x,{class:"tableStyle",data:i.tableData,columns:E(H),"row-key":"id",hover:"",stripe:"",bordered:"",loading:i.tableLoading,"foot-data":i.footData,size:"small"},{orderId:a(n=>[e(D,{theme:"primary",variant:"light-outline"},{default:a(()=>[g(T(n.row.orderId),1)]),_:2},1024)]),_:1},8,["data","columns","loading","foot-data"])]),_:1},8,["visible"])],64)}}});const at=$(Y,[["__scopeId","data-v-23757590"]]);export{at as default};
