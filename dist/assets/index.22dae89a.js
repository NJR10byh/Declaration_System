import{e as R,b as U,f as $,B as j,h as x,r as M,L as O,O as B,j as i,o as V,l as q,m as t,w as e,v,p as s,t as p,x as f,F as W,U as Y,W as G,V as H,M as J,y as Q,z as X,_ as Z}from"./index.2c261d0b.js";const A={listStat:"/payback/listStat",payDetail:"/payback/payDetail"},tt=[{title:"\u5E8F\u53F7",align:"center",colKey:"index",width:50},{title:"\u7528\u6237\u540D\u79F0",align:"center",colKey:"reporter",width:120,ellipsis:!0},{title:"\u62A5\u5355\u6570\u91CF",align:"center",colKey:"reportsNum",width:80,ellipsis:!0},{title:"\u5F85\u7ED3\u7B97\u91D1\u989D",align:"center",colKey:"paybackAmount",width:80,ellipsis:!0},{title:"\u64CD\u4F5C",align:"left",colKey:"settings",fixed:"right",width:80}],et=[{title:"\u5E8F\u53F7",align:"center",colKey:"index",width:50},{title:"\u8BA2\u5355\u53F7",align:"center",colKey:"orderId",width:80,ellipsis:!0},{title:"\u5546\u54C1",align:"left",colKey:"commodity",width:150,ellipsis:!0},{title:"\u5B9E\u4ED8\u91D1\u989D",align:"center",colKey:"payAmount",width:80,ellipsis:!0},{title:"\u5E94\u8FD4\u6B3E\u91D1\u989D",align:"center",colKey:"shouldPayback",width:80,ellipsis:!0},{title:"\u5907\u6CE8",align:"left",colKey:"remark",width:100,ellipsis:!0},{title:"\u5BA1\u6838\u5907\u6CE8",align:"left",colKey:"approvalRemark",width:100,ellipsis:!0}],g=b=>(Q("data-v-04df725d"),b=b(),X(),b),at={class:"settingBtns"},ot=g(()=>f("span",{style:{"font-weight":"bold"}},"\u59D3\u540D\uFF1A",-1)),nt=g(()=>f("span",{style:{"font-weight":"bold"}},"\u624B\u673A\u53F7\uFF1A",-1)),lt=g(()=>f("span",{style:{"font-weight":"bold"}},"\u652F\u4ED8\u5B9D\u8D26\u53F7\uFF1A",-1)),ut=g(()=>f("span",{style:{"font-weight":"bold"}},"\u94F6\u884C\u540D\u79F0\uFF1A",-1)),it=g(()=>f("span",{style:{"font-weight":"bold"}},"\u94F6\u884C\u5361\u53F7\uFF1A",-1)),st=R({__name:"index",setup(b){const I=U();$();const S=j(()=>I.isUseTabsRouter?48:0),D=()=>document.querySelector(`.${Y}-layout`),o=x({tableLoading:!1,tableData:[],searchText:"",pagination:{total:0,current:1,pageSize:20}}),n=x({tableLoading:!1,tableData:[],accountInfo:{userName:"\u5F20\u4E09",phoneNum:"18908213728",bankName:"\u4E2D\u56FD\u94F6\u884C",bankNum:"3213412323123",wxPic:"",zfbPic:"",zfbNum:""}}),y=M(!1),r=x({pageNo:1,pageItems:20,commodity:null,status:null,startTime:null,endTime:null,reporter:null,orderId:null});O(()=>{o.pagination.current=r.pageNo,o.pagination.pageSize=r.pageItems,k()});const z=u=>{console.log("\u5206\u9875\u53D8\u5316",u),r.pageNo=u.current,r.pageItems=u.pageSize,o.pagination.current=r.pageNo,o.pagination.pageSize=r.pageItems,k()},k=()=>{o.tableData=[],o.tableLoading=!0,B.post({url:A.listStat,data:r}).then(u=>{o.pagination.total=u.totalRows,o.tableData=u.list,o.tableData.map((a,l)=>{a.index=(o.pagination.current-1)*o.pagination.pageSize+l+1,a.paybackAmount+=" \u5143"})}).catch(u=>{}).finally(()=>{o.tableLoading=!1})},P=u=>{console.log("\u7ED3\u7B97",u),n.tableData=[],n.tableLoading=!0;let a={reporterId:u.reporterId};B.post({url:G(A.payDetail,a)}).then(l=>{n.tableData=l.payDetailList,n.tableData.map((m,d)=>{m.index=d+1,m.payAmount+=" \u5143",m.shouldPayback+=" \u5143"}),Object.assign(n.accountInfo,{userName:l.userName,phoneNum:l.phoneNum,bankName:l.bankName,bankNum:l.bankNum,wxPic:l.wxPic,zfbPic:l.zfbPic,zfbNum:l.zfbNum}),y.value=!0}).catch(l=>{}).finally(()=>{n.tableLoading=!1})},h=u=>{const a=H.confirm({header:"\u63D0\u793A",theme:"warning",body:"\u786E\u5B9A\u8981\u652F\u4ED8\u5417\uFF1F",confirmBtn:"\u786E\u8BA4\u652F\u4ED8",cancelBtn:"\u53D6\u6D88",onConfirm:()=>{switch(u){case"aliPay":console.log("\u652F\u4ED8\u5B9D\u652F\u4ED8");break;case"weChat":console.log("\u5FAE\u4FE1\u652F\u4ED8");break}J.success("\u5DF2\u652F\u4ED8"),a.destroy()},onClose:()=>{a.hide()}})};return(u,a)=>{const l=i("t-tag"),m=i("t-icon"),d=i("t-button"),C=i("t-table"),F=i("t-card"),w=i("t-col"),E=i("t-row"),_=i("t-list-item"),T=i("t-list"),N=i("t-image"),L=i("t-space"),K=i("t-dialog");return V(),q(W,null,[t(F,{class:"wait-rebate-table"},{default:e(()=>[t(C,{class:"tableStyle",data:o.tableData,columns:v(tt),"row-key":"id",hover:"",stripe:"",pagination:o.pagination,loading:o.tableLoading,"header-affixed-top":{offsetTop:S.value,container:D},"horizontal-scroll-affixed-bottom":{offsetBottom:64,container:D},"pagination-affixed-bottom":{offsetBottom:0,container:D},onPageChange:z,size:"small",style:{"margin-top":"10px"}},{paybackAmount:e(c=>[t(l,{theme:"primary",variant:"light-outline"},{default:e(()=>[s(p(c.row.paybackAmount),1)]),_:2},1024)]),settings:e(c=>[f("div",at,[t(d,{theme:"primary",onClick:ct=>P(c.row)},{icon:e(()=>[t(m,{name:"wallet"})]),default:e(()=>[s(" \u7ED3\u7B97 ")]),_:2},1032,["onClick"])])]),_:1},8,["data","columns","pagination","loading","header-affixed-top","horizontal-scroll-affixed-bottom","pagination-affixed-bottom"])]),_:1}),t(K,{visible:y.value,"onUpdate:visible":a[4]||(a[4]=c=>y.value=c),width:"1000px",header:"\u7ED3\u7B97",attach:"body","confirm-on-enter":!0},{body:e(()=>[t(L,{direction:"vertical"},{default:e(()=>[t(E,null,{default:e(()=>[t(w,{span:12},{default:e(()=>[t(C,{class:"tableStyle",data:n.tableData,columns:v(et),"row-key":"id",hover:"",stripe:"",loading:n.tableLoading,size:"small"},{orderId:e(c=>[t(l,{theme:"primary",variant:"light-outline"},{default:e(()=>[s(p(c.row.orderId),1)]),_:2},1024)]),_:1},8,["data","columns","loading"])]),_:1})]),_:1}),t(E,{justify:"space-between"},{default:e(()=>[t(w,{span:5},{default:e(()=>[t(F,{title:"\u8D26\u6237\u4FE1\u606F"},{default:e(()=>[t(T,{split:!0},{default:e(()=>[t(_,null,{default:e(()=>[ot,s(p(n.accountInfo.userName),1)]),_:1}),t(_,null,{default:e(()=>[nt,s(p(n.accountInfo.phoneNum),1)]),_:1}),t(_,null,{default:e(()=>[lt,s(p(n.accountInfo.zfbNum),1)]),_:1}),t(_,null,{default:e(()=>[ut,s(p(n.accountInfo.bankName),1)]),_:1}),t(_,null,{default:e(()=>[it,s(p(n.accountInfo.bankNum),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(w,{span:6},{default:e(()=>[t(F,{title:"\u6536\u6B3E\u7801"},{default:e(()=>[t(E,{justify:"space-between"},{default:e(()=>[t(N,{src:n.accountInfo.wxPic,fit:"contain",style:{width:"200px",height:"200px"}},null,8,["src"]),t(N,{src:n.accountInfo.zfbPic,fit:"contain",style:{width:"200px",height:"200px"}},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),footer:e(()=>[t(d,{theme:"default",onClick:a[0]||(a[0]=c=>y.value=!1)},{default:e(()=>[s("\u53D6\u6D88")]),_:1}),t(d,{theme:"primary",onClick:a[1]||(a[1]=c=>h("bankCard"))},{default:e(()=>[s("\u94F6\u884C\u5361\u652F\u4ED8")]),_:1}),t(d,{theme:"primary",onClick:a[2]||(a[2]=c=>h("aliPay"))},{default:e(()=>[s("\u652F\u4ED8\u5B9D\u652F\u4ED8")]),_:1}),t(d,{theme:"success",onClick:a[3]||(a[3]=c=>h("weChat"))},{default:e(()=>[s("\u5FAE\u4FE1\u652F\u4ED8")]),_:1})]),_:1},8,["visible"])],64)}}});const dt=Z(st,[["__scopeId","data-v-04df725d"]]);export{dt as default};
